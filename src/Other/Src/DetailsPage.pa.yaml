# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  DetailsPage:
    Properties:
      Fill: =RGBA(245, 245, 245, 1)
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
    Children:
      - FormViewer1:
          Control: FormViewer@2.3.4
          Layout: Vertical
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            DataSource: =DeviceDataList
            Height: =299
            Item: =selectedRecord
            Width: =572
            X: =44
            Y: =383
          Children:
            - Device Name_DataCard2:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DataField: ="Device_x0020_Name"
                  Default: =ThisItem.'Device Name'
                  DisplayName: =DataSourceInfo([@DeviceDataList],DataSourceInfo.DisplayName,'Device_x0020_Name')
                  Height: =54
                  Required: =false
                  Width: =572
                  X: =0
                  Y: =0
                Children:
                  - DataCardKey10:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 18, 107, 1)
                        Font: =Font.'Segoe UI'
                        Height: =71
                        Text: =Parent.DisplayName
                        Width: =190
                        Wrap: =false
                        X: =35
                        Y: =2
                  - DataCardValue10:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Segoe UI'
                        Height: =73
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =ThisItem.'Device Name'
                        Width: =229
                        X: =326
            - Serial Number_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DataField: ="Serial_x0020_Number"
                  Default: =ThisItem.'Serial Number'
                  DisplayName: =DataSourceInfo([@DeviceDataList],DataSourceInfo.DisplayName,'Serial_x0020_Number')
                  Height: =73
                  Required: =false
                  Width: =572
                  X: =0
                  Y: =1
                Children:
                  - DataCardKey6:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 18, 107, 1)
                        Font: =Font.'Segoe UI'
                        Height: =71
                        Text: =Parent.DisplayName
                        Width: =227
                        Wrap: =false
                        X: =35
                        Y: =2
                  - DataCardValue6:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Segoe UI'
                        Height: =73
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =ThisItem.'Serial Number'
                        Width: =229
                        X: =326
            - Phone Number_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DataField: ="Phone_x0020_Number"
                  Default: =ThisItem.'Phone Number'
                  DisplayName: =DataSourceInfo([@DeviceDataList],DataSourceInfo.DisplayName,'Phone_x0020_Number')
                  Height: =73
                  Required: =false
                  Width: =572
                  X: =0
                  Y: =2
                Children:
                  - DataCardKey5:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 18, 107, 1)
                        Font: =Font.'Segoe UI'
                        Height: =71
                        Text: =Parent.DisplayName
                        Width: =227
                        Wrap: =false
                        X: =35
                        Y: =2
                  - DataCardValue5:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Segoe UI'
                        Height: =73
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =ThisItem.'Phone Number'
                        Width: =229
                        X: =326
            - Date of Purchase_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DataField: ="Date_x0020_of_x0020_Purchase"
                  Default: =ThisItem.'Date of Purchase'
                  DisplayName: =DataSourceInfo([@DeviceDataList],DataSourceInfo.DisplayName,'Date_x0020_of_x0020_Purchase')
                  Height: =73
                  Required: =false
                  Width: =572
                  X: =0
                  Y: =3
                Children:
                  - DataCardKey7:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 18, 107, 1)
                        Font: =Font.'Segoe UI'
                        Height: =71
                        Text: =Parent.DisplayName
                        Width: =265
                        Wrap: =false
                        X: =35
                        Y: =2
                  - DataCardValue7:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Segoe UI'
                        Height: =73
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =Text(ThisItem.'Date of Purchase', "dd-mmm-yyyy")
                        Width: =229
                        X: =326
      - Rectangle1_1:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(204, 0, 0, 0.92)
            Height: =129
            Width: =640
      - Label2_1:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Arial
            FontWeight: =FontWeight.Semibold
            Size: =26
            Text: ="Search"
            Width: =213
            X: =91
            Y: =29
      - IconBackarrow1:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =0
            Height: =96
            Icon: =Icon.ChevronLeft
            OnSelect: =Navigate(SearchScreen, ScreenTransition.None)
            PaddingBottom: =24
            PaddingLeft: =24
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Back to list"
            Width: =91
            Y: =16
      - Image3:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =216
            Image: |+
              =Switch(
                  selectedRecord.'Device Name',
                  "Galaxy A02", SamsungA02,
                  "Galaxy A03", SamsungA03,
                  "Galaxy A04", SamsungA04,
                  "A03 Core", SamsungA03Core,
                  "A04 Core", SamsungA04Core,
                  "Galaxy A05", SamsungA05A,
                  "Galaxy 06", SamsungA06,
                  "Galaxy A15", SamsungA15,
                  "Galaxy A12", SamsungA12,
                  "Galaxy 23+", SamsungS23Plus, 
                 Blank()
              )

            X: =160
            Y: =153
      - Rectangle3:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Fill: =RGBA(204, 0, 0, 0.85)
            Height: =76
            Width: =640
            Y: =1060
      - FooterImage:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =76
            Image: ='RTCZ-removebg-preview_1'
            X: =160
            Y: =1060
      - NetworkData:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Segoe UI'
            Height: =73
            Text: |+
              =
              Switch(
                Left(selectedRecord.'Phone Number', 3),
                "096", "MTN",
                "076", "MTN",
                "097", "Airtel",
                "077", "Airtel",
                "057", "Airtel",
                "095", "Zamtel",
                "Unknown"
              )

            Width: =229
            X: =365
            Y: =682
      - RateData:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Segoe UI'
            Height: =73
            Text: "=With(\r\n  {\r\n    device: selectedRecord.'Device Name',\r\n    months: Value(selectedRecord.'Months Used'),\r\n    network: Switch(\r\n        Left(selectedRecord.'Phone Number', 3),\r\n        \"096\", \"MTN\", \"076\", \"MTN\",\r\n        \"097\", \"Airtel\", \"077\", \"Airtel\", \"057\", \"Airtel\",\r\n        \"095\", \"Zamtel\",\r\n        \"Unknown\"\r\n    )\r\n  },\r\n \r\n  Text(\r\n    If(\r\n      Or(device = \"Galaxy A05\", device = \"Galaxy A15\"),\r\n      Switch(\r\n        network,\r\n        \"Airtel\", \r\n          If(months <= 3, 1, months <= 6, 0.8, months <= 10, 0.6, months <= 13, 0.5, months <= 16, 0.4, months <= 19, 0.2, months <= 23, 0.1, months = 24, 0, 0),\r\n        \"MTN\", \r\n          If(months <= 6, 1, months <= 9, 0.5, months <= 12, 0.4, months <= 15, 0.3, months <= 19, 0.2, months <= 23, 0.1, months = 24, 0, 0),\r\n        \"Zamtel\", \r\n          0,\r\n        0\r\n      ),\r\n      0\r\n    ) * 100,\r\n    \"0%\"\r\n  )\r\n)\r\n"
            Width: =229
            X: =365
            Y: =755
      - BuyBackValueData:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Segoe UI'
            Height: =73
            Text: |+
              =With(
                {
                  device: selectedRecord.'Device Name',
                  months: Value(selectedRecord.'Months Used'),
                  basePrice: Value(selectedRecord.'Base Price'),
                  phoneNumber: selectedRecord.'Phone Number'
                },
                With(
                  {
                    prefix: Left(phoneNumber, 3),
                    network: Switch(
                      Left(phoneNumber, 3),
                      "096", "MTN", "076", "MTN",
                      "097", "Airtel", "077", "Airtel", "057", "Airtel",
                      "095", "Zamtel",
                      "Unknown"
                    )
                  },
                  With(
                    {
                      rate: If(
                        Or(device = "Galaxy A05", device = "Galaxy A15"),
                        Switch(
                          network,
                          "Airtel",
                            If(months <= 3, 1, months <= 6, 0.8, months <= 10, 0.6, months <= 13, 0.5, months <= 16, 0.4, months <= 19, 0.2, months <= 23, 0.1, months = 24, 0, 0),
                          "MTN",
                            If(months <= 6, 1, months <= 9, 0.5, months <= 12, 0.4, months <= 15, 0.3, months <= 19, 0.2, months <= 23, 0.1, months = 24, 0, 0),
                          "Zamtel", 0,
                          0
                        ),
                        0
                      )
                    },
                    With(
                      {
                        amount: basePrice * rate
                      },
                      If(
                        amount > 0,
                        "K " & Text(amount, "#,###"),
                        "K 0"
                      )
                    )
                  )
                )
              )
            Width: =229
            X: =365
            Y: =828
      - Network:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =73
            Text: ="Network"
            Width: =225
            X: =79
            Y: =682
      - Rate:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =73
            Text: ="Rate"
            Width: =225
            X: =79
            Y: =755
      - BuyBackValue:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            Height: =73
            Text: ="Buy Back Value"
            Width: =225
            X: =79
            Y: =828
